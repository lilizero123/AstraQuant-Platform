# 星衡量化平台功能路线图

本文记录当前桌面版系统已经实现的能力、短期可完成的增强项，以及距离真实实盘部署仍需补齐的模块。目标是在没有真实券商 API 的情况下先把模拟/仿真流程做到位，同时为未来接入留好接口。

## 1. 已具备的能力

- **策略开发**：代码模式与蓝图模式互通，支持语法高亮、AI 辅助生成/诊断。
- **回测引擎**：多指标统计、图表展示，AI 回测点评。
- **行情中心**：AkShare/模拟数据源，可订阅多标的，通过 `StrategyRunner` 推送到策略，并支持 CSV 回放与可配置波动率的模拟行情。
- **交易执行**：TradingEngine + BrokerFactory（模拟券商 + 华泰/中信/国泰君安/海通/广发 REST），内置 HMAC 签名与证书校验，交易面板支持手动下单。
- **安全配置**：敏感信息通过本地加密仓库保存，配置文件不再写入明文账号与密钥。
- **自动策略**：在“交易”面板中选择策略与标的，启动 `StrategyRunner` 实时执行。
- **风控联动**：`StrategyRunner` 读取设置中的仓位/止损参数，实时调用 `RiskManager` 拦截超限委托并触发停机告警。
- **配置中心**：图形化设置对话框持久化数据源、券商、AI 等参数。
- **AI 助手**：本地启发式 + 可选远程 HTTP 接口。

## 2. 短期可完成的工作

这些任务不依赖真实 API，可以在当前工程中直接推进：

1. **策略运行可视化**
   - 在交易面板中展示净值、仓位、风险阈值使用情况，配合日志窗口同步 RiskManager 警报。
   - 提供风险摘要/历史记录导出，方便对单次触发做复盘。
2. **行情完善（已完成）**
   - 模拟行情可配置推送间隔、波动率，支持固定随机种子重放。
   - CSV 行情回放组件支持倍速播放/循环，便于加载真实数据验证策略。
3. **策略管理**
   - 在设置中指定“默认策略 + 标的列表”，自动策略入口自动填充。
   - 提供策略日志查看、导出功能。
4. **AI/蓝图增强**
   - 扩展蓝图节点库（风控、指标、下单节点等）。
   - 在 AI 面板中允许选择模型、配置参数模板。
5. **文档/示例**
   - 提供示例策略、示例配置、常见问题文档。

## 3. 需要真实 API 才能完成的工作

当获得券商/行情/LLM 的正式 API 后，需要进一步做：

- 券商登录/下单/回报的正式接入与测试，处理心跳、重连、风控校验。
- 实时行情（Level1/Level2/Tick）的可靠数据源、断线恢复、交易日历管理。
- AI 云服务的请求限流、缓存与安全加密。
- 后台服务化、策略托管、DevOps 相关。

## 4. 近期计划

1. 在交易面板加入风险状态小组件，提示是否触发停机或哪条规则生效，并可导出风控日志。
2. 持续扩展真实券商适配层与回测数据来源，覆盖更多品种。
3. 完善用户文档，明确哪些功能已可用、哪些为占位。

后续按阶段更新本文档。
